<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Speed Typer</title>
    <style>
        :root {
            --bg-color: #f0f4f8;
            --box-color: #ffffff;
            --text-color: #333;
            --highlight: #3b82f6;
            --correct: #22c55e;
            --incorrect: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: var(--text-color);
        }

        .container {
            background: var(--box-color);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            width: 700px;
            max-width: 90%;
            text-align: center;
        }

        h1 { margin-top: 0; color: var(--highlight); }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            background: #eef2ff;
            padding: 10px 20px;
            border-radius: 8px;
        }

        .quote-display {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            min-height: 100px;
            user-select: none; /* Prevent cheating by highlighting */
        }

        .quote-input {
            width: 100%;
            height: 80px;
            padding: 10px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: none;
            outline: none;
            font-family: inherit;
        }

        .quote-input:focus { border-color: var(--highlight); }

        /* Typography Styling */
        span { position: relative; }
        .correct { color: var(--correct); }
        .incorrect { color: var(--incorrect); text-decoration: underline; }
        
        button {
            margin-top: 1rem;
            padding: 10px 20px;
            font-size: 1rem;
            background-color: var(--highlight);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover { background-color: #2563eb; }
    </style>
</head>
<body>

    <div class="container">
        <h1>⚡ Speed Typer</h1>
        
        <div class="stats-bar">
            <span>Time: <span id="timer">0</span>s</span>
            <span>WPM: <span id="wpm">0</span></span>
            <span>Accuracy: <span id="accuracy">100</span>%</span>
        </div>

        <div class="quote-display" id="quoteDisplay">
            </div>

        <textarea class="quote-input" id="quoteInput" placeholder="Start typing here..."></textarea>
        
        <button onclick="renderNewQuote()">Restart Test</button>
    </div>

    <script>
        const RANDOM_QUOTES = [
            "The quick brown fox jumps over the lazy dog.",
            "Technology is best when it brings people together.",
            "It does not matter how slowly you go as long as you do not stop.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts.",
            "In the middle of every difficulty lies opportunity.",
            "Simplicity is the ultimate sophistication.",
            "Code is like humor. When you have to explain it, it’s bad."
        ];

        const quoteDisplayElement = document.getElementById('quoteDisplay');
        const quoteInputElement = document.getElementById('quoteInput');
        const timerElement = document.getElementById('timer');
        const wpmElement = document.getElementById('wpm');
        const accuracyElement = document.getElementById('accuracy');

        let startTime;
        let timerInterval;
        let isTimerStarted = false;

        quoteInputElement.addEventListener('input', () => {
            // Start timer on first keystroke
            if (!isTimerStarted) {
                startTimer();
                isTimerStarted = true;
            }

            const arrayQuote = quoteDisplayElement.querySelectorAll('span');
            const arrayValue = quoteInputElement.value.split('');
            let correctChars = 0;

            let allCorrect = true;

            arrayQuote.forEach((characterSpan, index) => {
                const character = arrayValue[index];

                if (character == null) {
                    characterSpan.classList.remove('correct');
                    characterSpan.classList.remove('incorrect');
                    allCorrect = false;
                } else if (character === characterSpan.innerText) {
                    characterSpan.classList.add('correct');
                    characterSpan.classList.remove('incorrect');
                    correctChars++;
                } else {
                    characterSpan.classList.remove('correct');
                    characterSpan.classList.add('incorrect');
                    allCorrect = false;
                }
            });

            // Calculate Stats Live
            if (arrayValue.length > 0) {
                const accuracy = Math.round((correctChars / arrayValue.length) * 100);
                accuracyElement.innerText = accuracy;
                
                // WPM Calculation: (All Typed Chars / 5) / (Time in minutes)
                const timeInMinutes = (getTimerTime() / 60);
                if (timeInMinutes > 0) {
                    const wpm = Math.round((arrayValue.length / 5) / timeInMinutes);
                    wpmElement.innerText = wpm;
                }
            }

            // End Condition
            if (allCorrect && arrayValue.length === arrayQuote.length) {
                clearInterval(timerInterval);
                quoteInputElement.disabled = true;
                quoteDisplayElement.innerHTML += "<br><strong>✨ Finished! Press Restart to try again.</strong>";
            }
        });

        function getRandomQuote() {
            return RANDOM_QUOTES[Math.floor(Math.random() * RANDOM_QUOTES.length)];
        }

        function renderNewQuote() {
            // Reset everything
            clearInterval(timerInterval);
            isTimerStarted = false;
            timerElement.innerText = 0;
            wpmElement.innerText = 0;
            accuracyElement.innerText = 100;
            quoteInputElement.value = '';
            quoteInputElement.disabled = false;
            quoteInputElement.focus();

            const quote = getRandomQuote();
            quoteDisplayElement.innerHTML = '';
            
            // Split quote into individual spans for character-level styling
            quote.split('').forEach(character => {
                const characterSpan = document.createElement('span');
                characterSpan.innerText = character;
                quoteDisplayElement.appendChild(characterSpan);
            });
        }

        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(() => {
                timerElement.innerText = getTimerTime();
            }, 1000);
        }

        function getTimerTime() {
            return Math.floor((new Date() - startTime) / 1000);
        }

        // Initialize
        renderNewQuote();
    </script>
</body>
</html>
